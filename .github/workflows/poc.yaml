name: POC

on:
  workflow_dispatch:
    inputs:
      android:
        description: 'android'
        required: true
        default: true
        type: boolean
      ios:
        description: 'ios'
        required: true
        default: true
        type: boolean
      qa:
        description: 'qa'
        required: true
        default: true
        type: boolean
      prod:
        description: 'prod'
        required: true
        default: true
        type: boolean

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: Print inputs
        run: |
          echo "# Deployment" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## Inputs" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "```json" >> $GITHUB_STEP_SUMMARY
          echo "${{ fromJSON(inputs) }}" >> $GITHUB_STEP_SUMMARY
          echo "```" >> $GITHUB_STEP_SUMMARY
          echo "```json" >> $GITHUB_STEP_SUMMARY
          echo "${{ inputs }}" >> $GITHUB_STEP_SUMMARY
          echo "```" >> $GITHUB_STEP_SUMMARY

  android-qa:
    runs-on: ubuntu-latest
    if: inputs.android && inputs.qa
    needs: setup
    steps:
      - name: android-qa
        run: echo "android-qa"

  android-prod:
    runs-on: ubuntu-latest
    if: inputs.android && inputs.prod
    needs: android-qa
    steps:
      - name: android-prod
        run: echo "android-prod"

  ios-qa:
    runs-on: ubuntu-latest
    needs: setup
    if: inputs.ios && inputs.qa
    steps:
      - name: ios-qa
        run: echo "ios-qa"

  ios-prod:
    runs-on: ubuntu-latest
    needs: ios-qa
    if: inputs.ios && inputs.prod
    steps:
      - name: ios-prod
        run: echo "ios-prod"
