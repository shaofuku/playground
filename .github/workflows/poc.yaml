name: POC

on:
  workflow_dispatch:
    inputs:
      targets:
        description: 'targets to build and deploy'
        required: true
        default: 'android-qa'
        type: choice
        options:
          - android-qa
          - android-prod
          - ios-qa
          - ios-prod

jobs:
  example_matrix:
    strategy:
      matrix:
        includes:
          # qa-android
          - os: ubuntu-latest
            app-env: qa
            app-env-short: qa
            app-platform: android
          # prod-android
          - os: ubuntu-latest
            app-env: production
            app-env-short: prod
            app-platform: android
          # qa-ios
          - os: macos-latest
            app-env: qa
            app-env-short: qa
            app-platform: ios
          # prod-ios
          - os: macos-latest
            app-env: production
            app-env-short: prod
            app-platform: ios
    runs-on: ${{ matrix.includes.os }}
    if: ${{ contains(inputs.targets, matrix.includes.app-platform) }}
    steps:
      - name: dump matrix
        id: dump_matrix
        run: echo '${{ toJSON(matrix) }}' >> $GITHUB_STEP_SUMMARY
